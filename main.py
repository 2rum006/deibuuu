import base64
exec(base64.b64decode("aW1wb3J0IHJhbmRvbQ0KaW1wb3J0IHJlcXVlc3RzDQpmcm9tIHRpbWUgaW1wb3J0IHNsZWVwDQppbXBvcnQgb3MsIHNpZ25hbCwgc3lzDQpmcm9tIHB5ZmlnbGV0IGltcG9ydCBmaWdsZXRfZm9ybWF0DQpmcm9tIHJpY2guY29uc29sZSBpbXBvcnQgQ29uc29sZQ0KZnJvbSByaWNoLnByb21wdCBpbXBvcnQgUHJvbXB0LCBJbnRQcm9tcHQNCmZyb20gcmljaC50ZXh0IGltcG9ydCBUZXh0DQpmcm9tIHJpY2guc3R5bGUgaW1wb3J0IFN0eWxlDQppbXBvcnQgcHlzdHlsZQ0KZnJvbSBweXN0eWxlIGltcG9ydCBDb2xvcnMsIENvbG9yYXRlDQoNCmZyb20gZGVpYnV1dSBpbXBvcnQgUGFrdW5kbw0KDQpfX0NIQU5ORUxfVVNFUk5BTUVfXyA9ICJERUlCVVVVIg0KX19HUk9VUF9VU0VSTkFNRV9fICAgPSAiREVJQlVVVSINCg0KZGVmIHNpZ25hbF9oYW5kbGVyKHNpZywgZnJhbWUpOg0KICAgIHByaW50KCJcbiBCeWUgQnllLi4uIikNCiAgICBzeXMuZXhpdCgwKQ0KDQpkZWYgZ3JhZGllbnRfdGV4dCh0ZXh0LCBjb2xvcnMpOg0KICAgIGxpbmVzID0gdGV4dC5zcGxpdGxpbmVzKCkNCiAgICBoZWlnaHQgPSBsZW4obGluZXMpDQogICAgd2lkdGggPSBtYXgobGVuKGxpbmUpIGZvciBsaW5lIGluIGxpbmVzKQ0KICAgIGNvbG9yZnVsX3RleHQgPSBUZXh0KCkNCiAgICBmb3IgeSwgbGluZSBpbiBlbnVtZXJhdGUobGluZXMpOg0KICAgICAgICBmb3IgeCwgY2hhciBpbiBlbnVtZXJhdGUobGluZSk6DQogICAgICAgICAgICBpZiBjaGFyICE9ICcgJzoNCiAgICAgICAgICAgICAgICBjb2xvcl9pbmRleCA9IGludCgoKHggLyAod2lkdGggLSAxIGlmIHdpZHRoID4gMSBlbHNlIDEpKSArICh5IC8gKGhlaWdodCAtIDEgaWYgaGVpZ2h0ID4gMSBlbHNlIDEpKSkgKiAwLjUgKiAobGVuKGNvbG9ycykgLSAxKSkNCiAgICAgICAgICAgICAgICBjb2xvcl9pbmRleCA9IG1pbihtYXgoY29sb3JfaW5kZXgsIDApLCBsZW4oY29sb3JzKSAtIDEpICAjIEVuc3VyZSB0aGUgaW5kZXggaXMgd2l0aGluIGJvdW5kcw0KICAgICAgICAgICAgICAgIHN0eWxlID0gU3R5bGUoY29sb3I9Y29sb3JzW2NvbG9yX2luZGV4XSkNCiAgICAgICAgICAgICAgICBjb2xvcmZ1bF90ZXh0LmFwcGVuZChjaGFyLCBzdHlsZT1zdHlsZSkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgY29sb3JmdWxfdGV4dC5hcHBlbmQoY2hhcikNCiAgICAgICAgY29sb3JmdWxfdGV4dC5hcHBlbmQoIlxuIikNCiAgICByZXR1cm4gY29sb3JmdWxfdGV4dA0KDQpkZWYgYmFubmVyKGNvbnNvbGUpOg0KICAgIG9zLnN5c3RlbSgnY2xzJyBpZiBvcy5uYW1lID09ICdudCcgZWxzZSAnY2xlYXInKQ0KICAgIGJyYW5kX25hbWUgPSBmaWdsZXRfZm9ybWF0KCdERUlCVScsIGZvbnQ9J2Jsb29keScpDQogICAgY29sb3JzID0gWw0KICAgICAgICAicmdiKDI1NSwwLDApIiwgInJnYigyNTUsNjksMCkiLCAicmdiKDI1NSwxNDAsMCkiLCAicmdiKDI1NSwyMTUsMCkiLCAicmdiKDE3MywyNTUsNDcpIiwgDQogICAgICAgICJyZ2IoMCwyNTUsMCkiLCAicmdiKDAsMjU1LDI1NSkiLCAicmdiKDAsMTkxLDI1NSkiLCAicmdiKDAsMCwyNTUpIiwgInJnYigxMzksMCwyNTUpIiwNCiAgICAgICAgInJnYigyNTUsMCwyNTUpIg0KICAgIF0NCiAgICBjb2xvcmZ1bF90ZXh0ID0gZ3JhZGllbnRfdGV4dChicmFuZF9uYW1lLCBjb2xvcnMpDQogICAgY29uc29sZS5wcmludChjb2xvcmZ1bF90ZXh0KQ0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnXHQgICAgICAgICDwnZCP8J2Qi/CdkITwnZCA8J2QkvCdkIQg8J2Qi/CdkI7wnZCG8J2QjvCdkJTwnZCTIPCdkIXwnZCR8J2QjvCdkIwg8J2QgvCdkI/wnZCMIPCdkIHwnZCE8J2QhfCdkI7wnZCR8J2QhCDwnZCU8J2QkvCdkIjwnZCN8J2QhiDwnZCT8J2Qh/CdkIjwnZCSIPCdkJPwnZCO8J2QjvCdkIsnKSkNCiAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnICAgIPCdkJLwnZCH8J2QgPCdkJHwnZCI8J2QjfCdkIYg8J2Qk/CdkIfwnZCEIPCdkIDwnZCC8J2QgvCdkITwnZCS8J2QkiDwnZCK8J2QhPCdkJgg8J2QiPCdkJIg8J2QjfCdkI7wnZCTIPCdkIDwnZCL8J2Qi/CdkI7wnZCW8J2QhPCdkIMg8J2QgPCdkI3wnZCDIPCdkJbwnZCI8J2Qi/CdkIsg8J2QgfCdkIQg8J2QgfCdkIvwnZCO8J2QgvCdkIrwnZCE8J2QgycpKSANCiAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJyAgICAgIPCdkILwnZCO8J2QjfCdkJPwnZCA8J2QgvCdkJMg8J2QjPCdkIQg8J2Qk/CdkI4g8J2QgfCdkJTwnZCYIPCdkJTwnZCN8J2Qi/CdkIjwnZCM8J2QiPCdkJPwnZCE8J2QgyDwnZCB8J2QgPCdkIvwnZCA8J2QjfCdkILwnZCEIPCdkJPwnZCGIEB7X19DSEFOTkVMX1VTRVJOQU1FX199JykpIA0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnIOKAjCAgICAgICAgICAg8J2Qk/CdkJ7wnZCl8J2QnvCdkKDwnZCr8J2QmvCdkKY6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199IPCdkI7wnZCrIEB7X19HUk9VUF9VU0VSTkFNRV9ffScpKQ0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCg0KZGVmIGxvYWRfcGxheWVyX2RhdGEoY3BtKToNCiAgICByZXNwb25zZSA9IGNwbS5nZXRfcGxheWVyX2RhdGEoKQ0KICAgIGlmIHJlc3BvbnNlLmdldCgnb2snKToNCiAgICAgICAgZGF0YSA9IHJlc3BvbnNlLmdldCgnZGF0YScpDQogICAgICAgIGlmICdmbG9hdHMnIGluIGRhdGEgYW5kICdsb2NhbElEJyBpbiBkYXRhIGFuZCAnbW9uZXknIGluIGRhdGEgYW5kICdjb2luJyBpbiBkYXRhOg0KICAgICAgICANCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnPT09PT09PT09PVsge19fQ0hBTk5FTF9VU0VSTkFNRV9ffSBdPT09PT09PT09PScpKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ05hbWUgICA6IHsoZGF0YS5nZXQoIk5hbWUiKSBpZiAiTmFtZSIgaW4gZGF0YSBlbHNlICJVTkRFRklORUQiKX0uJykpDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ0xvY2FsSUQ6IHtkYXRhLmdldCgibG9jYWxJRCIpfS4nKSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidNb25leSAgOiB7ZGF0YS5nZXQoIm1vbmV5Iil9LicpKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ0NvaW5zICA6IHtkYXRhLmdldCgiY29pbiIpfS4nKSkNCiAgICAgICAgICAgIA0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJyEgRVJST1I6IG5ldyBhY2NvdW50cyBtb3N0IGJlIHNpZ25lZC1pbiB0byB0aGUgZ2FtZSBhdCBsZWFzdCBvbmNlICEuJykpDQogICAgICAgICAgICBleGl0KDEpDQogICAgZWxzZToNCiAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJyEgRVJST1I6IHNlZW1zIGxpa2UgeW91ciBsb2dpbiBpcyBub3QgcHJvcGVybHkgc2V0ICEuJykpDQogICAgICAgIGV4aXQoMSkNCg0KDQpkZWYgbG9hZF9rZXlfZGF0YShjcG0pOg0KDQogICAgZGF0YSA9IGNwbS5nZXRfa2V5X2RhdGEoKQ0KICAgIA0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnPT09PT09PT1bIHtfX0NIQU5ORUxfVVNFUk5BTUVfX30gXT09PT09PT09JykpDQogICAgDQogICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidBY2Nlc3MgS2V5IDoge2RhdGEuZ2V0KCJhY2Nlc3Nfa2V5Iil9LicpKQ0KICAgIA0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGVsZWdyYW0gSUQ6IHtkYXRhLmdldCgidGVsZWdyYW1faWQiKX0uJykpDQogICAgDQogICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidCYWxhbmNlICQgIDogeyhkYXRhLmdldCgiY29pbnMiKSBpZiBub3QgZGF0YS5nZXQoImlzX3VubGltaXRlZCIpIGVsc2UgIlVubGltaXRlZCIpfS4nKSkNCiAgICAgICAgDQogICAgDQoNCmRlZiBwcm9tcHRfdmFsaWRfdmFsdWUoY29udGVudCwgdGFnLCBwYXNzd29yZD1GYWxzZSk6DQogICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgdmFsdWUgPSBQcm9tcHQuYXNrKGNvbnRlbnQsIHBhc3N3b3JkPXBhc3N3b3JkKQ0KICAgICAgICBpZiBub3QgdmFsdWUgb3IgdmFsdWUuaXNzcGFjZSgpOg0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZid7dGFnfSBjYW5ub3QgYmUgZW1wdHkgb3IganVzdCBzcGFjZXMuIFBsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXR1cm4gdmFsdWUNCiAgICAgICAgICAgIA0KZGVmIGxvYWRfY2xpZW50X2RldGFpbHMoKToNCiAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCgiaHR0cDovL2lwLWFwaS5jb20vanNvbiIpDQogICAgZGF0YSA9IHJlc3BvbnNlLmpzb24oKQ0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnPT09PT09PT09PT09PVsge19fQ0hBTk5FTF9VU0VSTkFNRV9ffSBdPT09PT09PT09PT09PScpKQ0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnSXAgQWRkcmVzcyA6IHtkYXRhLmdldCgicXVlcnkiKX0uJykpDQogICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidMb2NhdGlvbiAgIDoge2RhdGEuZ2V0KCJjaXR5Iil9IHtkYXRhLmdldCgicmVnaW9uTmFtZSIpfSB7ZGF0YS5nZXQoImNvdW50cnlDb2RlIil9LicpKQ0KICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnQ291bnRyeSAgICA6IHtkYXRhLmdldCgiY291bnRyeSIpfSB7ZGF0YS5nZXQoInppcCIpfS4nKSkNCiAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJz09PT09PT09PT09PT09PVsge19fQ0hBTk5FTF9VU0VSTkFNRV9ffSBdPT09PT09PT09PT09PT09JykpDQoNCmRlZiBpbnRlcnBvbGF0ZV9jb2xvcihzdGFydF9jb2xvciwgZW5kX2NvbG9yLCBmcmFjdGlvbik6DQogICAgc3RhcnRfcmdiID0gdHVwbGUoaW50KHN0YXJ0X2NvbG9yW2k6aSsyXSwgMTYpIGZvciBpIGluICgxLCAzLCA1KSkNCiAgICBlbmRfcmdiID0gdHVwbGUoaW50KGVuZF9jb2xvcltpOmkrMl0sIDE2KSBmb3IgaSBpbiAoMSwgMywgNSkpDQogICAgaW50ZXJwb2xhdGVkX3JnYiA9IHR1cGxlKGludChzdGFydCArIGZyYWN0aW9uICogKGVuZCAtIHN0YXJ0KSkgZm9yIHN0YXJ0LCBlbmQgaW4gemlwKHN0YXJ0X3JnYiwgZW5kX3JnYikpDQogICAgcmV0dXJuICJ7OjAyeH17OjAyeH17OjAyeH0iLmZvcm1hdCgqaW50ZXJwb2xhdGVkX3JnYikNCg0KZGVmIHJhaW5ib3dfZ3JhZGllbnRfc3RyaW5nKGN1c3RvbWVyX25hbWUpOg0KICAgIG1vZGlmaWVkX3N0cmluZyA9ICIiDQogICAgbnVtX2NoYXJzID0gbGVuKGN1c3RvbWVyX25hbWUpDQogICAgc3RhcnRfY29sb3IgPSAiezowNnh9Ii5mb3JtYXQocmFuZG9tLnJhbmRpbnQoMCwgMHhGRkZGRkYpKQ0KICAgIGVuZF9jb2xvciA9ICJ7OjA2eH0iLmZvcm1hdChyYW5kb20ucmFuZGludCgwLCAweEZGRkZGRikpDQogICAgZm9yIGksIGNoYXIgaW4gZW51bWVyYXRlKGN1c3RvbWVyX25hbWUpOg0KICAgICAgICBmcmFjdGlvbiA9IGkgLyBtYXgobnVtX2NoYXJzIC0gMSwgMSkNCiAgICAgICAgaW50ZXJwb2xhdGVkX2NvbG9yID0gaW50ZXJwb2xhdGVfY29sb3Ioc3RhcnRfY29sb3IsIGVuZF9jb2xvciwgZnJhY3Rpb24pDQogICAgICAgIG1vZGlmaWVkX3N0cmluZyArPSBmJ1t7aW50ZXJwb2xhdGVkX2NvbG9yfV17Y2hhcn0nDQogICAgcmV0dXJuIG1vZGlmaWVkX3N0cmluZw0KDQppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOg0KICAgIGNvbnNvbGUgPSBDb25zb2xlKCkNCiAgICBzaWduYWwuc2lnbmFsKHNpZ25hbC5TSUdJTlQsIHNpZ25hbF9oYW5kbGVyKQ0KICAgIHdoaWxlIFRydWU6DQogICAgICAgIGJhbm5lcihjb25zb2xlKQ0KICAgICAgICBhY2NfZW1haWwgPSBwcm9tcHRfdmFsaWRfdmFsdWUoIltib2xkXVs/XSBBY2NvdW50IEVtYWlsWy9ib2xkXSIsICJFbWFpbCIsIHBhc3N3b3JkPUZhbHNlKQ0KICAgICAgICBhY2NfcGFzc3dvcmQgPSBwcm9tcHRfdmFsaWRfdmFsdWUoIltib2xkXVs/XSBBY2NvdW50IFBhc3N3b3JkWy9ib2xkXSIsICJQYXNzd29yZCIsIHBhc3N3b3JkPUZhbHNlKQ0KICAgICAgICBhY2NfYWNjZXNzX2tleSA9IHByb21wdF92YWxpZF92YWx1ZSgiW2JvbGRdWz9dIEFjY2VzcyBLZXlbL2JvbGRdIiwgIkFjY2VzcyBLZXkiLCBwYXNzd29yZD1GYWxzZSkNCiAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGQgY3lhbl1bJV0gVHJ5aW5nIHRvIExvZ2luWy9ib2xkIGN5YW5dOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgY3BtID0gUGFrdW5kbyhhY2NfYWNjZXNzX2tleSkNCiAgICAgICAgbG9naW5fcmVzcG9uc2UgPSBjcG0ubG9naW4oYWNjX2VtYWlsLCBhY2NfcGFzc3dvcmQpDQogICAgICAgIGlmIGxvZ2luX3Jlc3BvbnNlICE9IDA6DQogICAgICAgICAgICBpZiBsb2dpbl9yZXNwb25zZSA9PSAxMDA6DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0FDQ09VTlQgTk9UIEZPVU5ELicpKQ0KICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgbG9naW5fcmVzcG9uc2UgPT0gMTAxOg0KICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdXUk9ORyBQQVNTV09SRC4nKSkNCiAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIGxvZ2luX3Jlc3BvbnNlID09IDEwMzoNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnSU5WQUxJRCBBQ0NFU1MgS0VZLicpKQ0KICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1RSWSBBR0FJTi4nKSkNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnISBOb3RlOiBtYWtlIHN1cmUgeW91IGZpbGxlZCBvdXQgdGhlIGZpZWxkcyAhLicpKQ0KICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMLicpKQ0KICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgd2hpbGUgVHJ1ZToNCiAgICAgICAgICAgIGJhbm5lcihjb25zb2xlKQ0KICAgICAgICAgICAgbG9hZF9wbGF5ZXJfZGF0YShjcG0pDQogICAgICAgICAgICBsb2FkX2tleV9kYXRhKGNwbSkNCiAgICAgICAgICAgIGxvYWRfY2xpZW50X2RldGFpbHMoKQ0KICAgICAgICAgICAgY2hvaWNlcyA9IFsiMCIsICIxIiwgIjIiLCAiMyIsICI0IiwgIjUiLCAiNiIsICI3IiwgIjgiLCAiOSIsICIxMCIsICIxMSIsICIxMiIsICIxMyIsICIxNCIsICIxNSIsICIxNiIsICIxNyIsICIxOCIsICIxOSIsICIyMCIsICIyMSIsICIyMiIsICIyMyIsICIyNCIsICIyNSIsICIyNiIsICIyNyIsICIyOCIsICIyOSIsICIzMCIsICIzMSIsICIzMiJdDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezAxfTogSW5jcmVhc2UgTW9uZXkgICAgICAgICAgIDEuNUsnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MDJ9OiBJbmNyZWFzZSBDb2lucyAgICAgICAgICAgNC41SycpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3swM306IEtpbmcgUmFuayAgICAgICAgICAgICAgICA4SycpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3swNH06IENoYW5nZSBJRCAgICAgICAgICAgICAgICA0LjVLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezA1fTogQ2hhbmdlIE5hbWUgICAgICAgICAgICAgIDEwMCcpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3swNn06IENoYW5nZSBOYW1lIChSYWluYm93KSAgICAxMDAnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MDd9OiBOdW1iZXIgUGxhdGVzICAgICAgICAgICAgMksnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7MDh9OiBBY2NvdW50IERlbGV0ZSAgICAgICAgICAgRlJFRScpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3swOX06IEFjY291bnQgUmVnaXN0ZXIgICAgICAgICBGUkVFJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezEwfTogRGVsZXRlIEZyaWVuZHMgICAgICAgICAgIDUwMCcpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3sxMX06IFVubG9jayBQYWlkIENhcnMgICAgICAgICA1aycpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3sxMn06IFVubG9jayBhbGwgQ2FycyAgICAgICAgICA2SycpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3sxM306IFVubG9jayBhbGwgQ2FycyBTaXJlbiAgICAzLjVLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezE0fTogVW5sb2NrIHcxNiBFbmdpbmUgICAgICAgIDRLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezE1fTogVW5sb2NrIEFsbCBIb3JucyAgICAgICAgIDNLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezE2fTogVW5sb2NrIERpc2FibGUgRGFtYWdlICAgIDNLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezE3fTogVW5sb2NrIFVubGltaXRlZCBGdWVsICAgIDNLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezE4fTogVW5sb2NrIEhvdXNlIDMgICAgICAgICAgIDRLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezE5fTogVW5sb2NrIFNtb2tlICAgICAgICAgICAgIDRLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezIwfTogVW5sb2NrIFdoZWVscyAgICAgICAgICAgIDRLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezIxfTogVW5sb2NrIEFuaW1hdGlvbnMgICAgICAgIDJLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezIyfTogVW5sb2NrIEVxdWlwYW1lbnRzIE0gICAgIDNLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezIzfTogVW5sb2NrIEVxdWlwYW1lbnRzIEYgICAgIDNLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezI0fTogQ2hhbmdlIFJhY2UgV2lucyAgICAgICAgIDFLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezI1fTogQ2hhbmdlIFJhY2UgTG9zZXMgICAgICAgIDFLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezI2fTogQ2xvbmUgQWNjb3VudCAgICAgICAgICAgIDdLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezI3fTogQ3VzdG9tIEhQICAgICAgICAgICAgICAgIDIuNUsnKSkNCiAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICd7Mjh9OiBDdXN0b20gQW5nbGUgICAgICAgICAgICAgMS41SycpKQ0KICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3syOX06IEN1c3RvbSBUaXJlIGJ1cm5lciAgICAgICAxLjVLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezMwfTogQ3VzdG9tIENhciBNaWxsYWdlICAgICAgIDJLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezMxfTogQ3VzdG9tIENhciBCcmFrZSAgICAgICAgIDJLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezMyfTogQ2hhbmdlIEFjY291bnQgRW1haWwgICAgIDJLJykpDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnezB9IDogRXhpdCcpKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJz09PT09PT09PT09PT09PVsge19fQ0hBTk5FTF9VU0VSTkFNRV9ffSBdPT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICANCiAgICAgICAgICAgIHNlcnZpY2UgPSBJbnRQcm9tcHQuYXNrKGYiW2JvbGRdWz9dIFNlbGVjdCBhIFNlcnZpY2UgW3JlZF1bMS17Y2hvaWNlc1stMV19IG9yIDBdWy9yZWRdWy9ib2xkXSIsIGNob2ljZXM9Y2hvaWNlcywgc2hvd19jaG9pY2VzPUZhbHNlKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJz09PT09PT09PT09PT09PVsge19fQ0hBTk5FTF9VU0VSTkFNRV9ffSBdPT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIHNlcnZpY2UgPT0gMDoNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmVsOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAxOiAjIEluY3JlYXNlIE1vbmV5DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1s/XSBJbnNlcnQgaG93IG11Y2ggbW9uZXkgZG8geW91IHdhbnQuJykpDQogICAgICAgICAgICAgICAgYW1vdW50ID0gSW50UHJvbXB0LmFzaygiWz9dIEFtb3VudCIpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFNhdmluZyB5b3VyIGRhdGE6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGFtb3VudCA+IDAgYW5kIGFtb3VudCA8PSA1MDAwMDAwMDA6DQogICAgICAgICAgICAgICAgICAgIGlmIGNwbS5zZXRfcGxheWVyX21vbmV5KGFtb3VudCk6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHVzZSB2YWxpZCB2YWx1ZXMuJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMjoNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWz9dIEluc2VydCBob3cgbXVjaCBjb2lucyBkbyB5b3Ugd2FudC4nKSkNCiAgICAgICAgICAgICAgICBhbW91bnQgPSBJbnRQcm9tcHQuYXNrKCJbP10gQW1vdW50IikNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gU2F2aW5nIHlvdXIgZGF0YTogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgYW1vdW50ID4gMCBhbmQgYW1vdW50IDw9IDUwMDAwMDoNCiAgICAgICAgICAgICAgICAgICAgaWYgY3BtLnNldF9wbGF5ZXJfY29pbnMoYW1vdW50KToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdXNlIHZhbGlkIHZhbHVlcy4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAzOg0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltib2xkIHJlZF1bIV0gTm90ZTpbL2JvbGQgcmVkXTogaWYgdGhlIGtpbmcgcmFuayBkb2Vzbid0IGFwcGVhciBpbiBnYW1lLCBjbG9zZSBpdCBhbmQgb3BlbiBmZXcgdGltZXMuIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGQgcmVkXVshXSBOb3RlOlsvYm9sZCByZWRdOiBwbGVhc2UgZG9uJ3QgZG8gS2luZyBSYW5rIG9uIHNhbWUgYWNjb3VudCB0d2ljZS4iLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBHaXZpbmcgeW91IGEgS2luZyBSYW5rOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0uc2V0X3BsYXllcl9yYW5rKCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDQ6DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1s/XSBFbnRlciB5b3VyIG5ldyBJRC4nKSkNCiAgICAgICAgICAgICAgICBuZXdfaWQgPSBQcm9tcHQuYXNrKCJbP10gSUQiKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBTYXZpbmcgeW91ciBkYXRhOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBsZW4obmV3X2lkKSA+PSAwIGFuZCBsZW4obmV3X2lkKSA8PSA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5IGFuZCAoJyAnIGluIG5ld19pZCkgPT0gRmFsc2U6DQogICAgICAgICAgICAgICAgICAgIGlmIGNwbS5zZXRfcGxheWVyX2xvY2FsaWQobmV3X2lkLnVwcGVyKCkpOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB1c2UgdmFsaWQgSUQuJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gNToNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWz9dIEVudGVyIHlvdXIgbmV3IE5hbWUuJykpDQogICAgICAgICAgICAgICAgbmV3X25hbWUgPSBQcm9tcHQuYXNrKCJbP10gTmFtZSIpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFNhdmluZyB5b3VyIGRhdGE6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGxlbihuZXdfbmFtZSkgPj0gMCBhbmQgbGVuKG5ld19uYW1lKSA8PSA5OTk5OTk5OTk6DQogICAgICAgICAgICAgICAgICAgIGlmIGNwbS5zZXRfcGxheWVyX25hbWUobmV3X25hbWUpOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB1c2UgdmFsaWQgdmFsdWVzLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDY6DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1s/XSBFbnRlciB5b3VyIG5ldyBSYWluYm93IE5hbWUuJykpDQogICAgICAgICAgICAgICAgbmV3X25hbWUgPSBQcm9tcHQuYXNrKCJbP10gTmFtZSIpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFNhdmluZyB5b3VyIGRhdGE6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGxlbihuZXdfbmFtZSkgPj0gMCBhbmQgbGVuKG5ld19uYW1lKSA8PSA5OTk5OTk5OTk6DQogICAgICAgICAgICAgICAgICAgIGlmIGNwbS5zZXRfcGxheWVyX25hbWUocmFpbmJvd19ncmFkaWVudF9zdHJpbmcobmV3X25hbWUpKToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdXNlIHZhbGlkIHZhbHVlcy4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSA3Og0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBHaXZpbmcgeW91IGEgTnVtYmVyIFBsYXRlczogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLnNldF9wbGF5ZXJfcGxhdGVzKCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDg6DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1shXSBBZnRlciBkZWxldGluZyB5b3VyIGFjY291bnQgdGhlcmUgaXMgbm8gZ29pbmcgYmFjayAhIS4nKSkNCiAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIERlbGV0ZSB0aGlzIEFjY291bnQgPyEiLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOg0KICAgICAgICAgICAgICAgICAgICBjcG0uZGVsZXRlKCkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSA5Og0KICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdbIV0gUmVnaXN0cmluZyBuZXcgQWNjb3VudC4nKSkNCiAgICAgICAgICAgICAgICBhY2MyX2VtYWlsID0gcHJvbXB0X3ZhbGlkX3ZhbHVlKCJbP10gQWNjb3VudCBFbWFpbCIsICJFbWFpbCIsIHBhc3N3b3JkPUZhbHNlKQ0KICAgICAgICAgICAgICAgIGFjYzJfcGFzc3dvcmQgPSBwcm9tcHRfdmFsaWRfdmFsdWUoIls/XSBBY2NvdW50IFBhc3N3b3JkIiwgIlBhc3N3b3JkIiwgcGFzc3dvcmQ9RmFsc2UpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIENyZWF0aW5nIG5ldyBBY2NvdW50OiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBzdGF0dXMgPSBjcG0ucmVnaXN0ZXIoYWNjMl9lbWFpbCwgYWNjMl9wYXNzd29yZCkNCiAgICAgICAgICAgICAgICBpZiBzdGF0dXMgPT0gMDoNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnSU5GTzogSW4gb3JkZXIgdG8gdHdlYWsgdGhpcyBhY2NvdW50IHdpdGgge19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ3lvdSBtb3N0IHNpZ24taW4gdG8gdGhlIGdhbWUgdXNpbmcgdGhpcyBhY2NvdW50LicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsaWYgc3RhdHVzID09IDEwNToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1RoaXMgZW1haWwgaXMgYWxyZWFkeSBleGlzdHMgIS4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAxMDoNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gRGVsZXRpbmcgeW91ciBGcmllbmRzOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0uZGVsZXRlX3BsYXllcl9mcmllbmRzKCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDExOg0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlshXSBOb3RlOiB0aGlzIGZ1bmN0aW9uIHRha2VzIGEgd2hpbGUgdG8gY29tcGxldGUsIHBsZWFzZSBkb24ndCBjYW5jZWwuIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFVubG9ja2luZyBBbGwgUGFpZCBDYXJzOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0udW5sb2NrX3BhaWRfY2FycygpOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAxMjoNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gVW5sb2NraW5nIEFsbCBDYXJzOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0udW5sb2NrX2FsbF9jYXJzKCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDEzOg0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBVbmxvY2tpbmcgQWxsIENhcnMgU2lyZW46ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS51bmxvY2tfYWxsX2NhcnNfc2lyZW4oKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMTQ6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFVubG9ja2luZyB3MTYgRW5naW5lOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0udW5sb2NrX3cxNigpOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAxNToNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gVW5sb2NraW5nIEFsbCBIb3JuczogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLnVubG9ja19ob3JucygpOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAxNjoNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gVW5sb2NraW5nIERpc2FibGUgRGFtYWdlOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0uZGlzYWJsZV9lbmdpbmVfZGFtYWdlKCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDE3Og0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBVbmxvY2tpbmcgVW5saW1pdGVkIEZ1ZWw6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS51bmxpbWl0ZWRfZnVlbCgpOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSkNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUGxlYXNlIHRyeSBhZ2Fpbi4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAxODoNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gVW5sb2NraW5nIEhvdXNlIDM6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS51bmxvY2tfaG91c2VzKCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDE5Og0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBVbmxvY2tpbmcgU21va2U6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS51bmxvY2tfc21va2UoKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMjA6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFVubG9ja2luZyBXaGVlbHM6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS51bmxvY2tfd2hlZWxzKCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDIxOg0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBVbmxvY2tpbmcgQW5pbWF0aW9uczogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLnVubG9ja19hbmltYXRpb25zKCk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCBmJ1RoYW5rIFlvdSBmb3IgdXNpbmcgb3VyIHRvb2wsIHBsZWFzZSBqb2luIG91ciB0ZWxlZ3JhbSBjaGFubmU6IEB7X19DSEFOTkVMX1VTRVJOQU1FX199LicpKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQbGVhc2UgdHJ5IGFnYWluLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDIyOg0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBVbmxvY2tpbmcgRXF1aXBhbWVudHMgTWFsZTogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLnVubG9ja19lcXVpcG1lbnRzX21hbGUoKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMjM6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiWyVdIFVubG9ja2luZyBFcXVpcGFtZW50cyBGZW1hbGU6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS51bmxvY2tfZXF1aXBtZW50c19mZW1hbGUoKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRC4nKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMjQ6DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1shXSBJbnNlcnQgaG93IG11Y2ggcmFjZXMgeW91IHdpbi4nKSkNCiAgICAgICAgICAgICAgICBhbW91bnQgPSBJbnRQcm9tcHQuYXNrKCJbP10gQW1vdW50IikNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbJV0gQ2hhbmdpbmcgeW91ciBkYXRhOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBhbW91bnQgPiAwIGFuZCBhbW91bnQgPD0gOTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5Og0KICAgICAgICAgICAgICAgICAgICBpZiBjcG0uc2V0X3BsYXllcl93aW5zKGFtb3VudCk6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BsZWFzZSB0cnkgYWdhaW4uJykpDQogICAgICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWyFdIFBsZWFzZSB1c2UgdmFsaWQgdmFsdWVzLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDI1Og0KICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdbIV0gSW5zZXJ0IGhvdyBtdWNoIHJhY2VzIHlvdSBsb3NlLicpKQ0KICAgICAgICAgICAgICAgIGFtb3VudCA9IEludFByb21wdC5hc2soIls/XSBBbW91bnQiKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBDaGFuZ2luZyB5b3VyIGRhdGE6ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGFtb3VudCA+IDAgYW5kIGFtb3VudCA8PSA5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk5OTk6DQogICAgICAgICAgICAgICAgICAgIGlmIGNwbS5zZXRfcGxheWVyX2xvc2VzKGFtb3VudCk6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiWz9dIERvIFlvdSB3YW50IHRvIEV4aXQgPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1shXSBQbGVhc2UgdXNlIHZhbGlkIHZhbHVlcy4nKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQuJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdbIV0gUGxlYXNlIHVzZSB2YWxpZCB2YWx1ZXMuJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMjY6DQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1shXSBQbGVhc2UgRW50ZXIgQWNjb3VudCBEZXRhbGlzLicpKQ0KICAgICAgICAgICAgICAgIHRvX2VtYWlsID0gcHJvbXB0X3ZhbGlkX3ZhbHVlKCJbP10gQWNjb3VudCBFbWFpbCIsICJFbWFpbCIsIHBhc3N3b3JkPUZhbHNlKQ0KICAgICAgICAgICAgICAgIHRvX3Bhc3N3b3JkID0gcHJvbXB0X3ZhbGlkX3ZhbHVlKCJbP10gQWNjb3VudCBQYXNzd29yZCIsICJQYXNzd29yZCIsIHBhc3N3b3JkPUZhbHNlKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIlslXSBDbG9uaW5nIHlvdXIgYWNjb3VudDogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLmFjY291bnRfY2xvbmUodG9fZW1haWwsIHRvX3Bhc3N3b3JkKToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1NVQ0NFU1NGVUwnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbP10gRG8gWW91IHdhbnQgdG8gRXhpdCA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csIGYnVGhhbmsgWW91IGZvciB1c2luZyBvdXIgdG9vbCwgcGxlYXNlIGpvaW4gb3VyIHRlbGVncmFtIGNoYW5uZTogQHtfX0NIQU5ORUxfVVNFUk5BTUVfX30uJykpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZTogICAgIA0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWyFdIFRIQVQgUkVDSUVWRVIgQUNDT1VOVCBJUyBHTUFJTCBQQVNTV09SRCBJUyBOT1QgVkFMSUQgT1IgVEhBVCBBQ0NPVU5UIElTIE5PVCBSRUdJU1RFUkVELicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDI3Og0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltib2xkIHllbGxvd11bIV0gTm90ZVsvYm9sZCB5ZWxsb3ddOiBvcmlnaW5hbCBzcGVlZCBjYW4gbm90IGJlIHJlc3RvcmVkIS4iKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltib2xkIGN5YW5dWyFdIEVudGVyIENhciBEZXRhaWxzLlsvYm9sZCBjeWFuXSIpDQogICAgICAgICAgICAgICAgY2FyX2lkID0gSW50UHJvbXB0LmFzaygiW2JvbGRdWz9dIENhciBJZFsvYm9sZF0iKQ0KICAgICAgICAgICAgICAgIG5ld19ocCA9IEludFByb21wdC5hc2soIltib2xkXVs/XUVudGVyIE5ldyBIUFsvYm9sZF0iKQ0KICAgICAgICAgICAgICAgIG5ld19pbm5lcl9ocCA9IEludFByb21wdC5hc2soIltib2xkXVs/XUVudGVyIE5ldyBJbm5lciBIcFsvYm9sZF0iKQ0KICAgICAgICAgICAgICAgIG5ld19ubSA9IEludFByb21wdC5hc2soIltib2xkXVs/XUVudGVyIE5ldyBUb3JxdWVbL2JvbGRdIikNCiAgICAgICAgICAgICAgICBuZXdfdG9ycXVlID0gSW50UHJvbXB0LmFzaygiW2JvbGRdWz9dRW50ZXIgTmV3IE5NWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGQgY3lhbl1bJV0gSGFja2luZyBDYXIgU3BlZWRbL2JvbGQgY3lhbl06IixlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0uaGFja19jYXJfc3BlZWQoY2FyX2lkLCBuZXdfaHAsIG5ld19pbm5lcl9ocCwgbmV3X25tLCBuZXdfdG9ycXVlKToNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGQgZ3JlZW5dU1VDQ0VTRlVMICjinJQpWy9ib2xkIGdyZWVuXSIpDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IikNCiAgICAgICAgICAgICAgICAgICAgYW5zdyA9IFByb21wdC5hc2soIls/XSBEbyBZb3Ugd2FudCB0byBFeGl0ID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgZidUaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sLCBwbGVhc2Ugam9pbiBvdXIgdGVsZWdyYW0gY2hhbm5lOiBAe19fQ0hBTk5FTF9VU0VSTkFNRV9ffS4nKSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVELicpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWyFdIFBsZWFzZSB1c2UgdmFsaWQgdmFsdWVzLicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDI4Og0KICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdbIV0gRU5URVIgQ0FSIERFVEFMSVMnKSkNCiAgICAgICAgICAgICAgICBjYXJfaWQgPSBJbnRQcm9tcHQuYXNrKCJbYm9sZF1bP10gQ0FSIElEWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1shXSBFTlRFUiBTVEVFUklORyBBTkdMRScpKQ0KICAgICAgICAgICAgICAgIGN1c3RvbSA9IEludFByb21wdC5hc2soIltyZWRdWz9d77u/RU5URVIgVEhFIEFNT1VOVCBPRiBBTkdMRSBZT1UgV0FOVFsvcmVkXSIpICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltyZWRdWyVdIEhBQ0tJTkcgQ0FSIEFOR0xFWy9yZWRdOiAiLCBlbmQ9Tm9uZSkNCiAgICAgICAgICAgICAgICBpZiBjcG0ubWF4X21heDEoY2FyX2lkLCBjdXN0b20pOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnU1VDQ0VTU0ZVTCcpKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiW3JlZF1bP10gRE8gWU9VIFdBTlQgVE8gRVhJVFsvcmVkXSA/IiwgY2hvaWNlcz1bInkiLCAibiJdLCBkZWZhdWx0PSJuIikNCiAgICAgICAgICAgICAgICAgICAgaWYgYW5zdyA9PSAieSI6IGNvbnNvbGUucHJpbnQoIlRIQU5LIFlPVSBGT1IgVVNJTkcgT1VSIFRPT0wiKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOiBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdGQUlMRUQnKSkNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ1BMRUFTRSBUUlkgQUdBSU4nKSkNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsaWYgc2VydmljZSA9PSAyOToNCiAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnWyFdIEVOVEVSIENBUiBERVRBTElTJykpDQogICAgICAgICAgICAgICAgY2FyX2lkID0gSW50UHJvbXB0LmFzaygiW2JvbGRdWz9dIENBUiBJRFsvYm9sZF0iKQ0KICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdbIV0gRU5URVIgUEVSQ0VOVEFHRScpKQ0KICAgICAgICAgICAgICAgIGN1c3RvbSA9IEludFByb21wdC5hc2soIltwaW5rXVs/Xe+7v0VOVEVSIFBFUkNFTlRBR0UgVElSRVMgVSBXQU5UWy9waW5rXSIpICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltyZWRdWyVdIFNldHRpbmcgUGVyY2VudGFnZSBbL3JlZF06ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS5tYXhfbWF4MihjYXJfaWQsIGN1c3RvbSk6DQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdTVUNDRVNTRlVMJykpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbYm9sZCBncmVlbl1bP10gRE8gWU9VIFdBTlQgVE8gRVhJVFsvYm9sZCBncmVlbl0gPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBjb25zb2xlLnByaW50KCJUSEFOSyBZT1UgRk9SIFVTSU5HIE9VUiBUT09MIikNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVEJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQTEVBU0UgVFJZIEFHQUlOJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMzA6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGRdRU5URVIgQ0FSIERFVEFJTFMhWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgY2FyX2lkID0gSW50UHJvbXB0LmFzaygiW2JvbGRdWz9dIENBUiBJRFsvYm9sZF0iKQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltib2xkXUVOVEVSIE5FVyBNSUxMQUdFIVsvYm9sZF0iKQ0KICAgICAgICAgICAgICAgIGN1c3RvbSA9IEludFByb21wdC5hc2soIltib2xkIGJsdWVdWz9d77u/RU5URVIgTUlMTEFHRSBVIFdBTlRbL2JvbGQgYmx1ZV0iKSAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCByZWRdWyVdIFNldHRpbmcgUGVyY2VudGFnZSBbL2JvbGQgcmVkXTogIiwgZW5kPU5vbmUpDQogICAgICAgICAgICAgICAgaWYgY3BtLm1pbGxhZ2VfY2FyKGNhcl9pZCwgY3VzdG9tKToNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGQgZ3JlZW5dU1VDQ0VTU0ZVTCAo4pyUKVsvYm9sZCBncmVlbl0iKQ0KICAgICAgICAgICAgICAgICAgICBhbnN3ID0gUHJvbXB0LmFzaygiW2JvbGRdWz9dIERPIFlPVSBXQU5UIFRPIEVYSVRbL2JvbGRdID8iLCBjaG9pY2VzPVsieSIsICJuIl0sIGRlZmF1bHQ9Im4iKQ0KICAgICAgICAgICAgICAgICAgICBpZiBhbnN3ID09ICJ5IjogY29uc29sZS5wcmludCgiVEhBTksgWU9VIEZPUiBVU0lORyBPVVIgVE9PTCIpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoQ29sb3JhdGUuSG9yaXpvbnRhbChDb2xvcnMucmFpbmJvdywgJ0ZBSUxFRCcpKQ0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnUExFQVNFIFRSWSBBR0FJTicpKQ0KICAgICAgICAgICAgICAgICAgICBzbGVlcCgyKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgZWxpZiBzZXJ2aWNlID09IDMxOg0KICAgICAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoIltib2xkXUVOVEVSIENBUiBERVRBSUxTIVsvYm9sZF0iKQ0KICAgICAgICAgICAgICAgIGNhcl9pZCA9IEludFByb21wdC5hc2soIltib2xkXVs/XSBDQVIgSURbL2JvbGRdIikNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZF1FTlRFUiBORVcgQlJBS0UhWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgY3VzdG9tID0gSW50UHJvbXB0LmFzaygiW2JvbGQgYmx1ZV1bP13vu79FTlRFUiBCUkFLRSBVIFdBTlRbL2JvbGQgYmx1ZV0iKSAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCByZWRdWyVdIFNldHRpbmcgQlJBS0UgWy9ib2xkIHJlZF06ICIsIGVuZD1Ob25lKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS5icmFrZV9jYXIoY2FyX2lkLCBjdXN0b20pOg0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZCBncmVlbl1TVUNDRVNTRlVMICjinJQpWy9ib2xkIGdyZWVuXSIpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbYm9sZF1bP10gRE8gWU9VIFdBTlQgVE8gRVhJVFsvYm9sZF0gPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBjb25zb2xlLnByaW50KCJUSEFOSyBZT1UgRk9SIFVTSU5HIE9VUiBUT09MIikNCiAgICAgICAgICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwcmludChDb2xvcmF0ZS5Ib3Jpem9udGFsKENvbG9ycy5yYWluYm93LCAnRkFJTEVEJykpDQogICAgICAgICAgICAgICAgICAgIHByaW50KENvbG9yYXRlLkhvcml6b250YWwoQ29sb3JzLnJhaW5ib3csICdQTEVBU0UgVFJZIEFHQUlOJykpDQogICAgICAgICAgICAgICAgICAgIHNsZWVwKDIpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbGlmIHNlcnZpY2UgPT0gMzI6DQogICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiW2JvbGRdRW50ZXIgTmV3IEVtYWlsIVsvYm9sZF0iKQ0KICAgICAgICAgICAgICAgIG5ld19lbWFpbCA9IHByb21wdF92YWxpZF92YWx1ZSgiW2JvbGQgY3lhbl1bP10gQWNjb3VudCBOZXcgRW1haWxbL2JvbGQgY3lhbl0iLCAiRW1haWwiLCBwYXNzd29yZD1GYWxzZSkNCiAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KA0KICAgICAgICAgICAgICAgICAgICAgICJbYm9sZCByZWRdQ1svYm9sZCByZWRdW2JvbGQgZGFya19vcmFuZ2VdSFsvYm9sZCBkYXJrX29yYW5nZV1bYm9sZCB5ZWxsb3ddQVsvYm9sZCB5ZWxsb3ddIg0KICAgICAgICAgICAgICAgICAgICAgICJbYm9sZCBncmVlbl1OWy9ib2xkIGdyZWVuXVtib2xkIGN5YW5dR1svYm9sZCBjeWFuXVtib2xkIGJsdWVdSVsvYm9sZCBibHVlXSINCiAgICAgICAgICAgICAgICAgICAgICAiW2JvbGQgbWFnZW50YV1OWy9ib2xkIG1hZ2VudGFdW2JvbGQgdmlvbGV0XUdbL2JvbGQgdmlvbGV0XSAiDQogICAgICAgICAgICAgICAgICAgICAgIltib2xkIHJlZF1FWy9ib2xkIHJlZF1bYm9sZCBkYXJrX29yYW5nZV1NWy9ib2xkIGRhcmtfb3JhbmdlXVtib2xkIHllbGxvd11BWy9ib2xkIHllbGxvd10iDQogICAgICAgICAgICAgICAgICAgICAgIltib2xkIGdyZWVuXUlbL2JvbGQgZ3JlZW5dW2JvbGQgY3lhbl1MWy9ib2xkIGN5YW5dW2JvbGQgYmx1ZV0uWy9ib2xkIGJsdWVdIg0KICAgICAgICAgICAgICAgICAgICAgICJbYm9sZCBtYWdlbnRhXS5bL2JvbGQgbWFnZW50YV1bYm9sZCB2aW9sZXRdLlsvYm9sZCB2aW9sZXRdIiwNCiAgICAgICAgICAgICAgICAgICAgICAgZW5kPSIiKQ0KICAgICAgICAgICAgICAgIGlmIGNwbS5jaGFuZ2VfZW1haWwobmV3X2VtYWlsKToNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiXG5bYm9sZCBncmVlbl1TVUNDRVNTRlVMICjinJQpWy9ib2xkIGdyZWVuXSIpDQogICAgICAgICAgICAgICAgICAgIGFuc3cgPSBQcm9tcHQuYXNrKCJbYm9sZF1bP10gRE8gWU9VIFdBTlQgVE8gRVhJVFsvYm9sZF0gPyIsIGNob2ljZXM9WyJ5IiwgIm4iXSwgZGVmYXVsdD0ibiIpDQogICAgICAgICAgICAgICAgICAgIGlmIGFuc3cgPT0gInkiOiBjb25zb2xlLnByaW50KCJbYm9sZF1UaGFuayBZb3UgZm9yIHVzaW5nIG91ciB0b29sWy9ib2xkXSIpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6IGNvbnRpbnVlICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5wcmludCgiXG5bYm9sZCByZWRdRkFJTEVEWy9ib2xkIHJlZF0iKQ0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnByaW50KCJbYm9sZF1FTUFJTCBJUyBBTFJFQURZIFJFR0lTVEVSRURbL2JvbGRdIikNCiAgICAgICAgICAgICAgICAgICAgc2xlZXAoMikNCiAgICAgICAgICAgICAgICAgICAgY29udGludWUgICAgICAgIA0KICAgICAgICAgICAgZWxzZTogY29udGludWUNCiAgICAgICAgICAgIGJyZWFr"))